"use strict";(self["webpackChunkordering"]=self["webpackChunkordering"]||[]).push([[339],{6242:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"广告投放管理",visible:t.visible,"close-on-click-modal":!1,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.visible=e},close:t.AdvmgtDialogClose}},[e("div",{staticClass:"bg_div"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.groupData,height:"250"}},[e("el-table-column",{attrs:{prop:"username",label:"公司名称",width:"150"}}),e("el-table-column",{attrs:{label:"是否提交"},scopedSlots:t._u([{key:"default",fn:function(a){return["是"===a.row.status?e("el-tag",{attrs:{type:"success"}},[t._v("是")]):"否"===a.row.status?e("el-tag",{attrs:{type:"danger"}},[t._v("否")]):t._e()]}}])}),e("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"right",width:"300",trigger:"click"}},[e("el-table",{attrs:{data:t.userFeeData}},[e("el-table-column",{attrs:{width:"100",property:"market",label:"市场"}}),e("el-table-column",{attrs:{width:"150",property:"money",label:"已投入广告费"}})],1),e("el-button",{attrs:{slot:"reference"},on:{click:function(e){return t.showMoney(a.row)}},slot:"reference"},[t._v("点击查看广告费")])],1)]}}])})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.AdvmgtDialogClose}},[t._v("关 闭")]),e("el-button",{attrs:{type:"primary"},on:{click:t.endAdv}},[t._v("结束广告投放")])],1)])],1)},i=[],l={name:"AdvmgtDialog",props:{AdvmgtDialogFlag:{default:!1},meetingId:{type:String}},data(){return{visible:!1,CmeetingId:"",timer:"",teacherUid:this.$store.getters.getUser.role.uid,groupData:[{name:"米奇妙妙屋",flag:"1"},{name:"赚他一个亿",flag:"1"},{name:"卓子公司",flag:"0"}],userFeeData:[]}},updated(){this.timer=setInterval((()=>{this.loadStatus()}),5e3)},beforeDestroy(){clearInterval(this.timer)},methods:{AdvmgtDialogClose(){this.$emit("update:AdvmgtDialogFlag",!1)},loadStatus(){this.getRequest("/user/advertiseStatus?meetingId="+this.CmeetingId).then((t=>{t&&(this.groupData=t.data.data)}))},endAdv(){this.putRequest("/market/startOrder?meetingId="+this.CmeetingId+"&teacherUid="+this.teacherUid).then((t=>{"成功"==t.data.msg?(this.$emit("update:AdvmgtDialogFlag",!1),this.postRequest("/order/generateSequence?meetingId="+this.CmeetingId),this.$parent.loadMeeting(),this.$message({message:"成功结束",type:"success"})):(this.loading=!1,this.$message.error("结束失败"))}))},showMoney(t){this.getRequest("/user/getUserFee?uid="+t.uid+"&meetingId="+this.CmeetingId).then((t=>{t&&(this.userFeeData=t.data.data)}))}},watch:{AdvmgtDialogFlag(){this.visible=this.AdvmgtDialogFlag,this.CmeetingId=this.meetingId,this.loadStatus()}}},r=l,o=a(1001),n=(0,o.Z)(r,s,i,!1,null,"07dc05e2",null),d=n.exports}}]);
//# sourceMappingURL=339.6de6e721.js.map