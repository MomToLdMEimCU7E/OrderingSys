"use strict";(self["webpackChunkordering"]=self["webpackChunkordering"]||[]).push([[788],{9788:function(e,t,a){a.r(t),a.d(t,{default:function(){return n}});var r=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{title:"可选订单",visible:e.visible,"close-on-click-modal":!1,"append-to-body":!0},on:{"update:visible":function(t){e.visible=t},close:e.OrderinfoDialogClose}},[t("div",{staticClass:"topView"},[t("el-tag",{staticStyle:{"margin-right":"1%"},attrs:{effect:"dark"}},[e._v("当前市场已投放广告费: "+e._s(e.advFeeData))]),t("el-tag",{staticStyle:{"margin-right":"1%"},attrs:{effect:"dark"}},[e._v("可选择订单数: "+e._s(e.maxOrder))])],1),t("div",{staticClass:"bg_div"},[t("el-table",{ref:"multipleTableRef",staticStyle:{width:"100%"},attrs:{data:e.orderData,height:"250"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection"}}),t("el-table-column",{attrs:{fixed:"",prop:"orderId",label:"订单编号",width:"120"}}),t("el-table-column",{attrs:{prop:"time",label:"年度"}}),t("el-table-column",{attrs:{prop:"market",label:"市场"}}),t("el-table-column",{attrs:{prop:"amount",label:"数量"}}),t("el-table-column",{attrs:{prop:"price",label:"单价"}}),t("el-table-column",{attrs:{prop:"total",label:"总价"}}),t("el-table-column",{attrs:{prop:"period",label:"账期"}}),t("el-table-column",{attrs:{label:"条件"},scopedSlots:e._u([{key:"default",fn:function(a){return["加急"===a.row.urgent?t("el-tag",[e._v("加急")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"iso认证",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[" "===a.row.iso?t("el-tag",[e._v("ISO9000")]):"ISO14000"===a.row.iso?t("el-tag",[e._v("ISO14000")]):"ISO9000/ISO14000"===a.row.iso?t("el-tag",[e._v("ISO9000/ISO14000")]):e._e()]}}])})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.OrderinfoDialogClose}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.chooseOrder}},[e._v("确 定")])],1)])],1)},i=[],l={name:"OrderinfoDialog",props:{OrderinfoDialogFlag:{default:!1},meetingId:{type:String},marketId:{type:String}},data(){return{visible:!1,uid:this.$store.getters.getUser.role.uid,CmeetingId:"",CmarketId:"",orderVoList:[],orderData:[],chosedOrderData:[],maxOrder:"",advFeeData:""}},methods:{handleSelectionChange(e,t){if(e.length>this.maxOrder){let t=e.shift();this.$refs.multipleTableRef.toggleRowSelection(t,!1),this.orderVoList=e}else this.orderVoList=e},calculateMaxOrder(){this.getRequest("/order/getCurrentMarketAdFee?uid="+this.uid+"&meetingId="+this.CmeetingId+"&marketId="+this.CmarketId).then((e=>{e&&(this.advFeeData=e.data.data,this.maxOrder=Math.round(this.advFeeData/2),console.log(this.maxOrder))}))},chooseOrder(){this.$confirm("确定提交吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((e=>{this.postRequest("/order/selectOrder?uid="+this.uid+"&meetingId="+this.CmeetingId+"&marketId="+this.CmarketId,this.orderVoList).then((e=>{"成功"==e.data.msg?(this.$message({message:"选择成功",type:"success"}),this.$emit("update:OrderinfoDialogFlag",!1),this.orderVoList=[]):this.$message.error("选择失败")}))})).catch((()=>{this.$message({type:"info",message:"已取消提交"})}))},OrderinfoDialogClose(){this.$emit("update:OrderinfoDialogFlag",!1),this.$parent.loadStatus()},loadOrder(){this.getRequest("/order/getOrderAvailable?meetingId="+this.CmeetingId+"&marketId="+this.CmarketId+"&uid="+this.uid).then((e=>{e&&(this.orderData=e.data.data)}))}},watch:{OrderinfoDialogFlag(e){1==e?(this.visible=this.OrderinfoDialogFlag,this.CmarketId=this.marketId,this.CmeetingId=this.meetingId,this.loadOrder(),this.calculateMaxOrder()):this.visible=this.OrderinfoDialogFlag}}},s=l,o=a(1001),d=(0,o.Z)(s,r,i,!1,null,"647e9e3b",null),n=d.exports}}]);
//# sourceMappingURL=788.b0eed6a6.js.map