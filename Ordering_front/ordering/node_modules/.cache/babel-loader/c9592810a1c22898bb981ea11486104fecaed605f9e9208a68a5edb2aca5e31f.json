{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  components: {\n    AllinfoDialog: () => import(\"../../components/allinfo.vue\")\n  },\n  data() {\n    return {\n      highSearchValue: {\n        conState: \"\",\n        conMgr: \"\",\n        beginDateScope: null\n      },\n      childconId: \"\",\n      AllinfoDialogFlag: false,\n      conId: \"\",\n      showSearchVisible: false,\n      centerDialogVisible: false,\n      total: 0,\n      currentPage: 1,\n      pageSize: 20,\n      loading: false,\n      contractData: [],\n      excelData: [],\n      amountData: [],\n      dialogVisible: false,\n      updateCon: {\n        contractId: \"\",\n        contractTitle: \"\",\n        contractState: \"\",\n        contractSdate: \"\",\n        contractEdate: \"\",\n        contractMgr: \"\",\n        contractContent: \"\",\n        contractCeu: \"\",\n        contractPayment: \"\",\n        contractMoney: \"\",\n        customerName: \"\"\n      },\n      state: [{\n        contractState: \"未激活\",\n        label: \"未激活\"\n      }, {\n        contractState: \"激活\",\n        label: \"激活\"\n      }, {\n        contractState: \"履行\",\n        label: \"履行\"\n      }, {\n        contractState: \"暂停\",\n        label: \"暂停\"\n      }, {\n        contractState: \"解除\",\n        label: \"解除\"\n      }, {\n        contractState: \"完成\",\n        label: \"完成\"\n      }],\n      payment: [{\n        contractPayment: \"汇总\",\n        label: \"汇总\"\n      }, {\n        contractPayment: \"托付承收\",\n        label: \"托付承收\"\n      }, {\n        contractPayment: \"委托收款\",\n        label: \"委托收款\"\n      }, {\n        contractPayment: \"国内信用证\",\n        label: \"国内信用证\"\n      }]\n    };\n  },\n  watch: {\n    $route() {\n      location.reload();\n    }\n  },\n  mounted() {\n    this.loadCon();\n    this.loadAmount();\n  },\n  methods: {\n    AllinfoClick() {\n      this.AllinfoDialogFlag = true;\n      // this.childconId = \"1\";\n      // console.log(this.childconId);\n    },\n\n    toContractInput() {\n      this.$router.push({\n        path: \"/content/ContractInput\"\n      });\n    },\n    toContractDetail(data) {\n      // console.log(data);\n      this.$router.push({\n        path: \"/content/ContractDetail\",\n        query: {\n          id: data.contractId\n        }\n      });\n    },\n    loadCon() {\n      this.loading = true;\n      // this.getRequest(\"http://localhost:9090/contract/\").then(resp=>{\n      //   this.loading = false;\n      //   if(resp){\n      //     this.contractData = resp;\n      //   }\n      // })\n      this.$api.ContractAPI.loadCon(this);\n      console.log(\"123\", this.highSearchValue.beginDateScope);\n    },\n    loadAmount() {\n      this.$api.ContractAPI.loadAmount(this);\n    },\n    HSloadCon() {\n      this.loading = true;\n      this.$api.ContractAPI.HSloadCon(this);\n    },\n    doUpdate() {\n      this.$api.ContractAPI.changeCon(this);\n      this.dialogVisible = false;\n    },\n    showEditConView(data) {\n      this.updateCon.contractId = data.contractId;\n      this.updateCon.contractTitle = data.contractTitle;\n      this.updateCon.contractSdate = data.contractSdate;\n      this.updateCon.contractEdate = data.contractEdate;\n      this.updateCon.contractMgr = data.contractMgr;\n      this.updateCon.contractContent = data.contractContent;\n      this.updateCon.contractCeu = data.contractCeu;\n      this.updateCon.contractPayment = data.contractPayment;\n      this.updateCon.contractMoney = data.contractMoney;\n      this.updateCon.customerName = data.customerName;\n      this.updateCon.contractState = data.contractState;\n      console.log(\"123\", this.updateCon.contractSdate);\n      // Object.assign(this.updateCon.contractId,data.contractId);\n      // Object.assign(this.updateCon.contractState,data.contractState);\n      this.dialogVisible = true;\n    },\n    handleSizeChange(val) {\n      this.currentPage = 1;\n      this.pageSize = val;\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    exportExcel() {\n      this.excelData = this.contractData;\n      this.export2Excel();\n      // let tables = document.getElementById(\"out-table\");\n      // let table_book = this.$XLSX.utils.table_to_book(tables);\n      // var table_write = this.$XLSX.write(table_book, {\n      //   bookType: \"xlsx\",\n      //   bookSST: true,\n      //   type: \"array\",\n      // });\n      // try {\n      //   this.$FileSaver.saveAs(\n      //     new Blob([table_write], { type: \"application/octet-stream\" }),\n      //     \"sheetjs.xlsx\"\n      //   );\n      // } catch (e) {\n      //   if (typeof console !== \"undefined\") console.log(e, table_write);\n      // }\n      // return table_write;\n    },\n\n    export2Excel() {\n      var that = this;\n      require.ensure([], () => {\n        const {\n          export_json_to_excel\n        } = require(\"@/excel/export2Excel\"); // 这里必须使用绝对路径，使用@/+存放export2Excel的路径\n        const tHeader = [\"收费主体单位\", \"客户单位名称\", \"结算方式\", \"合同金额（元）\", \"合同开始日期\", \"合同结束日期\", \"已开票金额（元）\", \"已收款金额（元）\", \"收款日期\"]; // 导出的excel的表头字段可自定义\n        const filterVal = [\"contractCeu\", \"customerName\", \"contractPayment\", \"contractMoney\", \"contractSdate\", \"contractEdate\", \"invoiceMoney\", \"receivedAmount\", \"receivedDate\"]; // 对象属性，对应于tHeader，即prop的值，可自定义导出字段\n        const list = that.excelData; // json数组对象，接口返回的数据\n        const data = that.formatJson(filterVal, list);\n        export_json_to_excel(tHeader, data, \"合同台账\"); // 导出的表格名称，可自定义\n      });\n    },\n\n    // 格式转换\n    formatJson(filterVal, jsonData) {\n      return jsonData.map(v => filterVal.map(j => v[j]));\n    }\n  },\n  computed: {\n    IsMobile() {\n      return !this.$store.state.isMobile;\n    }\n  }\n};","map":{"version":3,"names":["components","AllinfoDialog","data","highSearchValue","conState","conMgr","beginDateScope","childconId","AllinfoDialogFlag","conId","showSearchVisible","centerDialogVisible","total","currentPage","pageSize","loading","contractData","excelData","amountData","dialogVisible","updateCon","contractId","contractTitle","contractState","contractSdate","contractEdate","contractMgr","contractContent","contractCeu","contractPayment","contractMoney","customerName","state","label","payment","watch","$route","location","reload","mounted","loadCon","loadAmount","methods","AllinfoClick","toContractInput","$router","push","path","toContractDetail","query","id","$api","ContractAPI","console","log","HSloadCon","doUpdate","changeCon","showEditConView","handleSizeChange","val","handleCurrentChange","exportExcel","export2Excel","that","require","ensure","export_json_to_excel","tHeader","filterVal","list","formatJson","jsonData","map","v","j","computed","IsMobile","$store","isMobile"],"sources":["src/views/Groupmgt.vue"],"sourcesContent":["<template>\r\n  <div class=\"pm_div\">\r\n    <div class=\"je_div\">\r\n      <el-row :gutter=\"0\">\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                未激活合同金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].inactiveMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                履行中合同金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].activeMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                暂停合同金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].pausedMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                解除合同金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].releasedMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                开票金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].finishedMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-card shadow=\"always\" class=\"box-card\">\r\n            <div class=\"amount\">\r\n              <div>\r\n                已收款金额\r\n                <div class=\"amountDetail\">\r\n                  {{ amountData[0].inactiveMoney }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n    <div>\r\n      <div class=\"an_div\">\r\n        <div>\r\n          <el-input\r\n            class=\"ss_input\"\r\n            prefix-icon=\"el-icon-search\"\r\n            placeholder=\"请输入合同编号进行搜索\"\r\n            v-model=\"conId\"\r\n            @keydown.enter.native=\"loadCon\"\r\n            clearable\r\n            @click=\"loadCon\"\r\n          ></el-input>\r\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"loadCon\"\r\n            >搜索</el-button\r\n          >\r\n          <el-button\r\n            type=\"primary\"\r\n            :icon=\"\r\n              showSearchVisible ? 'el-icon-arrow-up' : 'el-icon-arrow-down'\r\n            \"\r\n            @click=\"showSearchVisible = !showSearchVisible\"\r\n          >\r\n            高级搜索</el-button\r\n          >\r\n        </div>\r\n        <div>\r\n          <el-button type=\"success\"               v-if=\"IsMobile\"\r\n          >\r\n            <i class=\"el-icon-upload2\"></i>导入合同</el-button\r\n          >\r\n          <el-button type=\"primary\" @click=\"toContractInput\"               v-if=\"IsMobile\"\r\n          >\r\n            <i class=\"el-icon-plus\"></i>添加合同</el-button\r\n          >\r\n          <el-button type=\"warning\" @click=\"exportExcel\"               v-if=\"IsMobile\"\r\n          >\r\n            <i class=\"el-icon-download\"></i>导出表格</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <transition>\r\n      <div v-show=\"showSearchVisible\" class=\"highsearch\">\r\n        <el-row>\r\n          <el-col :span=\"4\">\r\n            合同状态\r\n            <el-select\r\n              v-model=\"highSearchValue.conState\"\r\n              placeholder=\"合同状态\"\r\n              class=\"updateStateSelect\"\r\n              style=\"width: 50%; margin: 2%\"\r\n              clearable\r\n            >\r\n              <el-option\r\n                v-for=\"item in state\"\r\n                :key=\"item.contractState\"\r\n                :label=\"item.label\"\r\n                :value=\"item.contractState\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            合同开始日期\r\n            <el-date-picker\r\n              v-model=\"highSearchValue.beginDateScope\"\r\n              type=\"daterange\"\r\n              align=\"right\"\r\n              unlink-panels\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              style=\"margin-left: 1%; margin-top: 1%\"\r\n            >\r\n            </el-date-picker>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            客户经理\r\n            <el-input\r\n              v-model=\"highSearchValue.conMgr\"\r\n              class=\"ss_input\"\r\n              prefix-icon=\"el-icon-search\"\r\n              placeholder=\"请输入客户经理名称进行搜索\"\r\n              style=\"margin: 1%\"\r\n            ></el-input>\r\n          </el-col>\r\n          <el-rol :span=\"6\">\r\n            <el-button style=\"margin: 5px\" @click=\"showSearchVisible = false\"\r\n              >取消</el-button\r\n            >\r\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"loadCon\"\r\n              >搜索</el-button\r\n            >\r\n          </el-rol>\r\n        </el-row>\r\n      </div>\r\n    </transition>\r\n    <div class=\"bg_div\">\r\n      <el-table\r\n        id=\"out-table\"\r\n        :data=\"\r\n          contractData.slice(\r\n            (currentPage - 1) * pageSize,\r\n            currentPage * pageSize\r\n          )\r\n        \"\r\n        v-loading=\"loading\"\r\n        style=\"width: 100%\"\r\n      >\r\n        <el-table-column prop=\"contractId\" label=\"合同编号\"> </el-table-column>\r\n        <el-table-column prop=\"contractTitle\" label=\"合同标题\" width=\"200px\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"contractSDate\" label=\"合同开始日期\">\r\n          <template slot-scope=\"scope\">{{\r\n            scope.row.contractSdate | dateFormat\r\n          }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contractEDate\" label=\"合同截止日期\">\r\n          <template slot-scope=\"scope\">{{\r\n            scope.row.contractEdate | dateFormat\r\n          }}</template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"contractMgr\" label=\"客户经理\"> </el-table-column>\r\n        <el-table-column prop=\"contractMoney\" label=\"合同金额\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"customerName\" label=\"客户名称\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"contractState\" label=\"合同状态\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"100px\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              @click=\"toContractDetail(scope.row)\"\r\n              type=\"text\"\r\n              size=\"small\"\r\n            >\r\n              查看\r\n            </el-button>\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"showEditConView(scope.row)\"\r\n              v-if=\"IsMobile\"\r\n            >\r\n              编辑\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <div class=\"fy_div\">\r\n      <el-pagination\r\n        background\r\n        layout=\"sizes,prev, pager, next, jumper, ->, total\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"total\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <div>\r\n      <el-dialog title=\"编辑合同\" :visible.sync=\"dialogVisible\" width=\"70%\">\r\n        <div class=\"in\">\r\n          <el-form\r\n            ref=\"contract_form\"\r\n            :model=\"contract_form\"\r\n          >\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"合同标题\" prop=\"contractTitle\">\r\n                  <el-input\r\n                    v-model=\"updateCon.contractTitle\"\r\n                    placeholder=\"请输入合同标题\"\r\n                    style=\"width: 300px\"\r\n                    size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"合同起始日期\" prop=\"contractSdate\">\r\n                  <el-date-picker\r\n                    v-model=\"updateCon.contractSDate\"\r\n                    type=\"date\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    placeholder=\"选择起始日期\"\r\n                    size=\"small\"\r\n                  >\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"合同结束日期\" prop=\"contractEdate\">\r\n                  <el-date-picker\r\n                    v-model=\"updateCon.contractEDate\"\r\n                    type=\"date\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    placeholder=\"选择结束日期\"\r\n                    size=\"small\"\r\n                  >\r\n                  </el-date-picker>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"客户经理\" prop=\"contractMgr\">\r\n                  <el-input\r\n                    v-model=\"updateCon.contractMgr\"\r\n                    placeholder=\"请输入客户经理姓名\"\r\n                    style=\"width: 200px\"\r\n                    size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"客户名称\" prop=\"customerName\">\r\n                  <el-input\r\n                    v-model=\"updateCon.customerName\"\r\n                    placeholder=\"请输入客户名称\"\r\n                    style=\"width: 200px\"\r\n                    size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"收费主体单位\" prop=\"contractCeu\">\r\n                  <el-input\r\n                    v-model=\"updateCon.contractCeu\"\r\n                    placeholder=\"请输入收费主体单位\"\r\n                    style=\"width: 300px\"\r\n                    size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"结算方式\" prop=\"contractPayment\">\r\n                  <!-- <el-tag size=\"medium\">合同状态</el-tag> -->\r\n                  <el-select\r\n                    v-model=\"updateCon.contractPayment\"\r\n                    placeholder=\"请选择\"\r\n                    class=\"updateStateSelect\"\r\n                    size=\"small\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in payment\"\r\n                      :key=\"item.contractPayment\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.contractPayment\"\r\n                    >\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"合同金额\" prop=\"contractMoney\">\r\n                  <el-input\r\n                    v-model=\"updateCon.contractMoney\"\r\n                    placeholder=\"请输入合同金额\"\r\n                    style=\"width: 200px\"\r\n                    size=\"small\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"合同状态\" prop=\"contractState\">\r\n                  <!-- <el-tag size=\"medium\">合同状态</el-tag> -->\r\n                  <el-select\r\n                    v-model=\"updateCon.contractState\"\r\n                    placeholder=\"请选择\"\r\n                    class=\"updateStateSelect\"\r\n                    size=\"small\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"item in state\"\r\n                      :key=\"item.contractState\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.contractState\"\r\n                    >\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-row>\r\n              <el-col span=\"24\">\r\n                <el-form-item label=\"合同内容\" prop=\"contractContent\">\r\n                  <el-input\r\n                    type=\"textarea\"\r\n                    :rows=\"10\"\r\n                    v-model=\"updateCon.contractContent\"\r\n                    placeholder=\"请输入合同内容\"\r\n                    style=\"width: 450px\"\r\n                  ></el-input>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"doUpdate()\">\r\n                修改合同</el-button\r\n              >\r\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n    <!-- <el-button type=\"text\" @click=\"centerDialogVisible = true\"\r\n      >点击打开 Dialog</el-button\r\n    > -->\r\n\r\n    <el-dialog\r\n      title=\"提示\"\r\n      :visible.sync=\"centerDialogVisible\"\r\n      width=\"30%\"\r\n      center\r\n    >\r\n      <span>需要注意的是内容是默认不居中的</span>\r\n      <el-input\r\n            class=\"ss_input\"\r\n            prefix-icon=\"el-icon-search\"\r\n            placeholder=\"请输入合同编号进行测试\"\r\n            v-model=\"childconId\"\r\n            clearable\r\n          ></el-input>\r\n    <AllinfoDialog :childconId.sync=\"childconId\" :AllinfoDialogFlag.sync=\"AllinfoDialogFlag\" />\r\n          <el-button type=\"primary\" @click=\"AllinfoClick\">\r\n            打开合同树\r\n            </el-button>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"centerDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"centerDialogVisible = false\"\r\n          >确 定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  components: {\r\n    AllinfoDialog: () => import(\"../../components/allinfo.vue\"),\r\n  },\r\n  data() {\r\n    return {\r\n      highSearchValue: {\r\n        conState: \"\",\r\n        conMgr: \"\",\r\n        beginDateScope: null,\r\n      },\r\n      childconId: \"\",\r\n      AllinfoDialogFlag: false,\r\n      conId: \"\",\r\n      showSearchVisible: false,\r\n      centerDialogVisible: false,\r\n      total: 0,\r\n      currentPage: 1,\r\n      pageSize: 20,\r\n      loading: false,\r\n      contractData: [],\r\n      excelData: [],\r\n      amountData: [],\r\n      dialogVisible: false,\r\n      updateCon: {\r\n        contractId: \"\",\r\n        contractTitle: \"\",\r\n        contractState: \"\",\r\n        contractSdate: \"\",\r\n        contractEdate: \"\",\r\n        contractMgr: \"\",\r\n        contractContent: \"\",\r\n        contractCeu: \"\",\r\n        contractPayment: \"\",\r\n        contractMoney: \"\",\r\n        customerName: \"\",\r\n      },\r\n      state: [\r\n        {\r\n          contractState: \"未激活\",\r\n          label: \"未激活\",\r\n        },\r\n        {\r\n          contractState: \"激活\",\r\n          label: \"激活\",\r\n        },\r\n        {\r\n          contractState: \"履行\",\r\n          label: \"履行\",\r\n        },\r\n        {\r\n          contractState: \"暂停\",\r\n          label: \"暂停\",\r\n        },\r\n        {\r\n          contractState: \"解除\",\r\n          label: \"解除\",\r\n        },\r\n        {\r\n          contractState: \"完成\",\r\n          label: \"完成\",\r\n        },\r\n      ],\r\n      payment: [\r\n        {\r\n          contractPayment: \"汇总\",\r\n          label: \"汇总\",\r\n        },\r\n        {\r\n          contractPayment: \"托付承收\",\r\n          label: \"托付承收\",\r\n        },\r\n        {\r\n          contractPayment: \"委托收款\",\r\n          label: \"委托收款\",\r\n        },\r\n        {\r\n          contractPayment: \"国内信用证\",\r\n          label: \"国内信用证\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  watch: {\r\n    $route() {\r\n      location.reload();\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadCon();\r\n    this.loadAmount();\r\n  },\r\n\r\n  methods: {\r\n    AllinfoClick() {\r\n      this.AllinfoDialogFlag = true;\r\n      // this.childconId = \"1\";\r\n      // console.log(this.childconId);\r\n    },\r\n    toContractInput() {\r\n      this.$router.push({ path: \"/content/ContractInput\" });\r\n    },\r\n    toContractDetail(data) {\r\n      // console.log(data);\r\n      this.$router.push({\r\n        path: \"/content/ContractDetail\",\r\n        query: {\r\n          id: data.contractId,\r\n        },\r\n      });\r\n    },\r\n    loadCon() {\r\n      this.loading = true;\r\n      // this.getRequest(\"http://localhost:9090/contract/\").then(resp=>{\r\n      //   this.loading = false;\r\n      //   if(resp){\r\n      //     this.contractData = resp;\r\n      //   }\r\n      // })\r\n      this.$api.ContractAPI.loadCon(this);\r\n      console.log(\"123\", this.highSearchValue.beginDateScope);\r\n    },\r\n    loadAmount() {\r\n      this.$api.ContractAPI.loadAmount(this);\r\n    },\r\n    HSloadCon() {\r\n      this.loading = true;\r\n      this.$api.ContractAPI.HSloadCon(this);\r\n    },\r\n    doUpdate() {\r\n      this.$api.ContractAPI.changeCon(\r\n        this\r\n      );\r\n      this.dialogVisible = false;\r\n    },\r\n    showEditConView(data) {\r\n      this.updateCon.contractId = data.contractId;\r\n      this.updateCon.contractTitle = data.contractTitle;\r\n      this.updateCon.contractSdate = data.contractSdate;\r\n      this.updateCon.contractEdate = data.contractEdate;\r\n      this.updateCon.contractMgr = data.contractMgr;\r\n      this.updateCon.contractContent = data.contractContent;\r\n      this.updateCon.contractCeu = data.contractCeu;\r\n      this.updateCon.contractPayment = data.contractPayment;\r\n      this.updateCon.contractMoney = data.contractMoney;\r\n      this.updateCon.customerName = data.customerName;\r\n      this.updateCon.contractState = data.contractState;\r\n      console.log(\"123\", this.updateCon.contractSdate);\r\n      // Object.assign(this.updateCon.contractId,data.contractId);\r\n      // Object.assign(this.updateCon.contractState,data.contractState);\r\n      this.dialogVisible = true;\r\n    },\r\n    handleSizeChange(val) {\r\n      this.currentPage = 1;\r\n      this.pageSize = val;\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n    },\r\n    exportExcel() {\r\n      this.excelData = this.contractData;\r\n      this.export2Excel();\r\n      // let tables = document.getElementById(\"out-table\");\r\n      // let table_book = this.$XLSX.utils.table_to_book(tables);\r\n      // var table_write = this.$XLSX.write(table_book, {\r\n      //   bookType: \"xlsx\",\r\n      //   bookSST: true,\r\n      //   type: \"array\",\r\n      // });\r\n      // try {\r\n      //   this.$FileSaver.saveAs(\r\n      //     new Blob([table_write], { type: \"application/octet-stream\" }),\r\n      //     \"sheetjs.xlsx\"\r\n      //   );\r\n      // } catch (e) {\r\n      //   if (typeof console !== \"undefined\") console.log(e, table_write);\r\n      // }\r\n      // return table_write;\r\n    },\r\n    export2Excel() {\r\n      var that = this;\r\n      require.ensure([], () => {\r\n        const { export_json_to_excel } = require(\"@/excel/export2Excel\"); // 这里必须使用绝对路径，使用@/+存放export2Excel的路径\r\n        const tHeader = [\r\n          \"收费主体单位\",\r\n          \"客户单位名称\",\r\n          \"结算方式\",\r\n          \"合同金额（元）\",\r\n          \"合同开始日期\",\r\n          \"合同结束日期\",\r\n          \"已开票金额（元）\",\r\n          \"已收款金额（元）\",\r\n          \"收款日期\",\r\n        ]; // 导出的excel的表头字段可自定义\r\n        const filterVal = [\r\n          \"contractCeu\",\r\n          \"customerName\",\r\n          \"contractPayment\",\r\n          \"contractMoney\",\r\n          \"contractSdate\",\r\n          \"contractEdate\",\r\n          \"invoiceMoney\",\r\n          \"receivedAmount\",\r\n          \"receivedDate\",\r\n        ]; // 对象属性，对应于tHeader，即prop的值，可自定义导出字段\r\n        const list = that.excelData; // json数组对象，接口返回的数据\r\n        const data = that.formatJson(filterVal, list);\r\n        export_json_to_excel(tHeader, data, \"合同台账\"); // 导出的表格名称，可自定义\r\n      });\r\n    },\r\n    // 格式转换\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map((v) => filterVal.map((j) => v[j]));\r\n    },\r\n  },\r\n  computed: {\r\n    IsMobile() {\r\n      return !this.$store.state.isMobile;\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.pm_div {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 1%;\r\n  margin-right: 2%;\r\n}\r\n.je_div {\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* background-color: white; */\r\n  margin-top: 40px;\r\n}\r\n.an_div {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-left: 1%;\r\n  margin-right: 1%;\r\n}\r\n.bg_div {\r\n  display: flex;\r\n  flex-direction: column;\r\n  /* background-color: white; */\r\n  padding: 1%;\r\n}\r\n.box-card {\r\n  width: 80%;\r\n  height: 80%;\r\n}\r\n.fy_div {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n.ss_input {\r\n  width: 300px;\r\n  margin-right: 10px;\r\n}\r\n.updateStateSelect {\r\n  margin-left: 20px;\r\n}\r\n.highsearch {\r\n  border: 1px solid #409eff;\r\n  border-radius: 5px;\r\n  box-sizing: border-box;\r\n  padding: 1%;\r\n  margin: 20px 20px;\r\n}\r\n.amount {\r\n  display: flex-start;\r\n  justify-content: center;\r\n  font-weight: bold;\r\n}\r\n.amountDetail {\r\n  margin-top: 20px;\r\n  font-size: 25px;\r\n}\r\n.v-enter-active,\r\n.v-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n.v-enter-from,\r\n.v-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>"],"mappings":";AAsaA;EACAA,UAAA;IACAC,aAAA,EAAAA,CAAA;EACA;EACAC,KAAA;IACA;MACAC,eAAA;QACAC,QAAA;QACAC,MAAA;QACAC,cAAA;MACA;MACAC,UAAA;MACAC,iBAAA;MACAC,KAAA;MACAC,iBAAA;MACAC,mBAAA;MACAC,KAAA;MACAC,WAAA;MACAC,QAAA;MACAC,OAAA;MACAC,YAAA;MACAC,SAAA;MACAC,UAAA;MACAC,aAAA;MACAC,SAAA;QACAC,UAAA;QACAC,aAAA;QACAC,aAAA;QACAC,aAAA;QACAC,aAAA;QACAC,WAAA;QACAC,eAAA;QACAC,WAAA;QACAC,eAAA;QACAC,aAAA;QACAC,YAAA;MACA;MACAC,KAAA,GACA;QACAT,aAAA;QACAU,KAAA;MACA,GACA;QACAV,aAAA;QACAU,KAAA;MACA,GACA;QACAV,aAAA;QACAU,KAAA;MACA,GACA;QACAV,aAAA;QACAU,KAAA;MACA,GACA;QACAV,aAAA;QACAU,KAAA;MACA,GACA;QACAV,aAAA;QACAU,KAAA;MACA,EACA;MACAC,OAAA,GACA;QACAL,eAAA;QACAI,KAAA;MACA,GACA;QACAJ,eAAA;QACAI,KAAA;MACA,GACA;QACAJ,eAAA;QACAI,KAAA;MACA,GACA;QACAJ,eAAA;QACAI,KAAA;MACA;IAEA;EACA;EACAE,KAAA;IACAC,OAAA;MACAC,QAAA,CAAAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;IACA,KAAAC,UAAA;EACA;EAEAC,OAAA;IACAC,aAAA;MACA,KAAAnC,iBAAA;MACA;MACA;IACA;;IACAoC,gBAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IACAC,iBAAA9C,IAAA;MACA;MACA,KAAA2C,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAE,KAAA;UACAC,EAAA,EAAAhD,IAAA,CAAAmB;QACA;MACA;IACA;IACAmB,QAAA;MACA,KAAAzB,OAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,KAAAoC,IAAA,CAAAC,WAAA,CAAAZ,OAAA;MACAa,OAAA,CAAAC,GAAA,aAAAnD,eAAA,CAAAG,cAAA;IACA;IACAmC,WAAA;MACA,KAAAU,IAAA,CAAAC,WAAA,CAAAX,UAAA;IACA;IACAc,UAAA;MACA,KAAAxC,OAAA;MACA,KAAAoC,IAAA,CAAAC,WAAA,CAAAG,SAAA;IACA;IACAC,SAAA;MACA,KAAAL,IAAA,CAAAC,WAAA,CAAAK,SAAA,CACA,KACA;MACA,KAAAtC,aAAA;IACA;IACAuC,gBAAAxD,IAAA;MACA,KAAAkB,SAAA,CAAAC,UAAA,GAAAnB,IAAA,CAAAmB,UAAA;MACA,KAAAD,SAAA,CAAAE,aAAA,GAAApB,IAAA,CAAAoB,aAAA;MACA,KAAAF,SAAA,CAAAI,aAAA,GAAAtB,IAAA,CAAAsB,aAAA;MACA,KAAAJ,SAAA,CAAAK,aAAA,GAAAvB,IAAA,CAAAuB,aAAA;MACA,KAAAL,SAAA,CAAAM,WAAA,GAAAxB,IAAA,CAAAwB,WAAA;MACA,KAAAN,SAAA,CAAAO,eAAA,GAAAzB,IAAA,CAAAyB,eAAA;MACA,KAAAP,SAAA,CAAAQ,WAAA,GAAA1B,IAAA,CAAA0B,WAAA;MACA,KAAAR,SAAA,CAAAS,eAAA,GAAA3B,IAAA,CAAA2B,eAAA;MACA,KAAAT,SAAA,CAAAU,aAAA,GAAA5B,IAAA,CAAA4B,aAAA;MACA,KAAAV,SAAA,CAAAW,YAAA,GAAA7B,IAAA,CAAA6B,YAAA;MACA,KAAAX,SAAA,CAAAG,aAAA,GAAArB,IAAA,CAAAqB,aAAA;MACA8B,OAAA,CAAAC,GAAA,aAAAlC,SAAA,CAAAI,aAAA;MACA;MACA;MACA,KAAAL,aAAA;IACA;IACAwC,iBAAAC,GAAA;MACA,KAAA/C,WAAA;MACA,KAAAC,QAAA,GAAA8C,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAA/C,WAAA,GAAA+C,GAAA;IACA;IACAE,YAAA;MACA,KAAA7C,SAAA,QAAAD,YAAA;MACA,KAAA+C,YAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACAA,aAAA;MACA,IAAAC,IAAA;MACAC,OAAA,CAAAC,MAAA;QACA;UAAAC;QAAA,IAAAF,OAAA;QACA,MAAAG,OAAA,IACA,UACA,UACA,QACA,WACA,UACA,UACA,YACA,YACA,OACA;QACA,MAAAC,SAAA,IACA,eACA,gBACA,mBACA,iBACA,iBACA,iBACA,gBACA,kBACA,eACA;QACA,MAAAC,IAAA,GAAAN,IAAA,CAAA/C,SAAA;QACA,MAAAf,IAAA,GAAA8D,IAAA,CAAAO,UAAA,CAAAF,SAAA,EAAAC,IAAA;QACAH,oBAAA,CAAAC,OAAA,EAAAlE,IAAA;MACA;IACA;;IACA;IACAqE,WAAAF,SAAA,EAAAG,QAAA;MACA,OAAAA,QAAA,CAAAC,GAAA,CAAAC,CAAA,IAAAL,SAAA,CAAAI,GAAA,CAAAE,CAAA,IAAAD,CAAA,CAAAC,CAAA;IACA;EACA;EACAC,QAAA;IACAC,SAAA;MACA,aAAAC,MAAA,CAAA9C,KAAA,CAAA+C,QAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}